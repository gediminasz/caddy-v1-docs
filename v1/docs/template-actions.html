<!DOCTYPE html>
<head>
	<head>
		<title>Template Actions - Caddy</title>
		<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Archivo+Black|Source+Sans+Pro:200,300,400,400i,600,700,700i,900">
<link rel="icon" href="/v1/resources/images/favicon.png">
<link rel="stylesheet" href="/v1/resources/css/common.css">
<link rel="stylesheet" href="/v1/resources/css/sweetalert2.min.css">
<script src="/v1/resources/js/sweetalert2.min.js"></script>
<script src="/v1/resources/js/jquery-3.3.1.min.js"></script>
<script src="/v1/resources/js/common.js"></script>
		<link rel="stylesheet" href="/v1/resources/css/docs.css">
	</head>
	<body>
		<header>
	<div class="top-bar content">
	<div class="left-links">
		<a href="/"><img src="/v1/resources/images/caddy-white.png" id="logo" alt="Caddy"></a>
	</div>
	<nav class="right-links links">
		<a href="/v1/download">Download</a>
		<a href="/v1/docs">Docs</a>
		<a href="/v1/stats">Stats</a>
		<a href="https://caddy.community">Forum</a>
		<a href="https://github.com/caddyserver/caddy" id="top-github-link">GitHub</a>
		<a href="/v1/account/login">Log In</a>
	</nav>
</div>
<a href="/" id="v2-banner">
	This page is about Caddy 1 and will go away soon because Caddy 2 is now available. Click here for Caddy 2.
</a>
	<div class="content">
		<h1>User Guide</h1>
	</div>
</header>

<nav class="main">
	<div class="content">
		<a href="/v1/docs" class="current">Documentation</a>
		<a href="/v1/tutorial">Tutorials</a>
		<a href="https://github.com/caddyserver/examples" class="external-link">Examples</a>
	</div>
</nav>


		<div class="content-container">
			<nav class="side">
	<!-- TODO: Consider using Maven Pro or Muli as font... -->
	<h3>Using Caddy</h3>
	<ul>
		<li><a href="/v1/tutorial">Getting Started &rarr;</a></li>
		<li><a href="/v1/docs/cli">Command Line Interface</a></li>
		<li><a href="/v1/docs/caddyfile">Caddyfile Syntax</a></li>
		<li><a href="/v1/docs/telemetry">Telemetry</a></li>
	</ul>

	<h3>HTTP Server</h3>
	<ul>
		<li><a href="/v1/docs/http-caddyfile">HTTP Caddyfile</a></li>
		<li><a href="/v1/docs/automatic-https">Automatic HTTPS</a></li>
		<li><a href="/v1/docs/mitm-detection">MITM Detection</a></li>
		<li><a href="/v1/docs/placeholders">Placeholders</a></li>
		<li><a href="/v1/docs/template-actions">Template Actions</a></li>
	</ul>

	<h4>Standard HTTP Directives</h4>
	<ul>
		<li><a href="/v1/docs/basicauth">basicauth</a></li>
		<li><a href="/v1/docs/bind">bind</a></li>
		<li><a href="/v1/docs/browse">browse</a></li>
		<li><a href="/v1/docs/errors">errors</a></li>
		<li><a href="/v1/docs/expvar">expvar</a></li>
		<li><a href="/v1/docs/ext">ext</a></li>
		<li><a href="/v1/docs/fastcgi">fastcgi</a></li>
		<li><a href="/v1/docs/gzip">gzip</a></li>
		<li><a href="/v1/docs/header">header</a></li>
		<li><a href="/v1/docs/import">import</a></li>
		<li><a href="/v1/docs/index">index</a></li>
		<li><a href="/v1/docs/internal">internal</a></li>
		<li><a href="/v1/docs/limits">limits</a></li>
		<li><a href="/v1/docs/log">log</a></li>
		<li><a href="/v1/docs/markdown">markdown</a></li>
		<li><a href="/v1/docs/mime">mime</a></li>
		<li><a href="/v1/docs/on">on</a></li>
		<li><a href="/v1/docs/pprof">pprof</a></li>
		<li><a href="/v1/docs/proxy">proxy</a></li>
		<li><a href="/v1/docs/push">push</a></li>
		<li><a href="/v1/docs/redir">redir</a></li>
		<li><a href="/v1/docs/request_id">request_id</a></li>
		<li><a href="/v1/docs/rewrite">rewrite</a></li>
		<li><a href="/v1/docs/root">root</a></li>
		<li><a href="/v1/docs/status">status</a></li>
		<li><a href="/v1/docs/templates">templates</a></li>
		<li><a href="/v1/docs/timeouts">timeouts</a></li>
		<li><a href="/v1/docs/tls">tls</a></li>
		<li><a href="/v1/docs/websocket">websocket</a></li>
	</ul>

	<h3>Plugins</h3>
	<ul>
		<li><a href="https://github.com/caddyserver/caddy/wiki" class="external-link">Writing a Caddy Plugin</a></li>
	</ul>

	
		<h4>Caddyfile Loaders</h4>
		<ul>
				<li><a href="/v1/docs/docker">docker</a></li>
		</ul>
	
		<h4>DNS Providers</h4>
		<ul>
				<li><a href="/v1/docs/tls.dns.auroradns">tls.dns.auroradns</a></li>
				<li><a href="/v1/docs/tls.dns.azure">tls.dns.azure</a></li>
				<li><a href="/v1/docs/tls.dns.cloudflare">tls.dns.cloudflare</a></li>
				<li><a href="/v1/docs/tls.dns.cloudxns">tls.dns.cloudxns</a></li>
				<li><a href="/v1/docs/tls.dns.digitalocean">tls.dns.digitalocean</a></li>
				<li><a href="/v1/docs/tls.dns.dnsimple">tls.dns.dnsimple</a></li>
				<li><a href="/v1/docs/tls.dns.dnsmadeeasy">tls.dns.dnsmadeeasy</a></li>
				<li><a href="/v1/docs/tls.dns.dnspod">tls.dns.dnspod</a></li>
				<li><a href="/v1/docs/tls.dns.duckdns">tls.dns.duckdns</a></li>
				<li><a href="/v1/docs/tls.dns.dyn">tls.dns.dyn</a></li>
				<li><a href="/v1/docs/tls.dns.exoscale">tls.dns.exoscale</a></li>
				<li><a href="/v1/docs/tls.dns.gandi">tls.dns.gandi</a></li>
				<li><a href="/v1/docs/tls.dns.gandiv5">tls.dns.gandiv5</a></li>
				<li><a href="/v1/docs/tls.dns.godaddy">tls.dns.godaddy</a></li>
				<li><a href="/v1/docs/tls.dns.googlecloud">tls.dns.googlecloud</a></li>
				<li><a href="/v1/docs/tls.dns.lightsail">tls.dns.lightsail</a></li>
				<li><a href="/v1/docs/tls.dns.linode">tls.dns.linode</a></li>
				<li><a href="/v1/docs/tls.dns.namecheap">tls.dns.namecheap</a></li>
				<li><a href="/v1/docs/tls.dns.namedotcom">tls.dns.namedotcom</a></li>
				<li><a href="/v1/docs/tls.dns.namesilo">tls.dns.namesilo</a></li>
				<li><a href="/v1/docs/tls.dns.ns1">tls.dns.ns1</a></li>
				<li><a href="/v1/docs/tls.dns.otc">tls.dns.otc</a></li>
				<li><a href="/v1/docs/tls.dns.ovh">tls.dns.ovh</a></li>
				<li><a href="/v1/docs/tls.dns.powerdns">tls.dns.powerdns</a></li>
				<li><a href="/v1/docs/tls.dns.rackspace">tls.dns.rackspace</a></li>
				<li><a href="/v1/docs/tls.dns.rfc2136">tls.dns.rfc2136</a></li>
				<li><a href="/v1/docs/tls.dns.route53">tls.dns.route53</a></li>
				<li><a href="/v1/docs/tls.dns.vultr">tls.dns.vultr</a></li>
		</ul>
	
		<h4>Directives/Middleware</h4>
		<ul>
				<li><a href="/v1/docs/dyndns">dyndns</a></li>
				<li><a href="/v1/docs/http.authz">http.authz</a></li>
				<li><a href="/v1/docs/http.awses">http.awses</a></li>
				<li><a href="/v1/docs/http.awslambda">http.awslambda</a></li>
				<li><a href="/v1/docs/http.cache">http.cache</a></li>
				<li><a href="/v1/docs/http.cgi">http.cgi</a></li>
				<li><a href="/v1/docs/http.cors">http.cors</a></li>
				<li><a href="/v1/docs/http.datadog">http.datadog</a></li>
				<li><a href="/v1/docs/http.expires">http.expires</a></li>
				<li><a href="/v1/docs/http.filter">http.filter</a></li>
				<li><a href="/v1/docs/http.forwardproxy">http.forwardproxy</a></li>
				<li><a href="/v1/docs/http.geoip">http.geoip</a></li>
				<li><a href="/v1/docs/http.git">http.git</a></li>
				<li><a href="/v1/docs/http.gomods">http.gomods</a></li>
				<li><a href="/v1/docs/http.gopkg">http.gopkg</a></li>
				<li><a href="/v1/docs/http.grpc">http.grpc</a></li>
				<li><a href="/v1/docs/http.ipfilter">http.ipfilter</a></li>
				<li><a href="/v1/docs/http.jwt">http.jwt</a></li>
				<li><a href="/v1/docs/http.locale">http.locale</a></li>
				<li><a href="/v1/docs/http.login">http.login</a></li>
				<li><a href="/v1/docs/http.mailout">http.mailout</a></li>
				<li><a href="/v1/docs/http.minify">http.minify</a></li>
				<li><a href="/v1/docs/http.nobots">http.nobots</a></li>
				<li><a href="/v1/docs/http.permission">http.permission</a></li>
				<li><a href="/v1/docs/http.prometheus">http.prometheus</a></li>
				<li><a href="/v1/docs/http.proxyprotocol">http.proxyprotocol</a></li>
				<li><a href="/v1/docs/http.pubsub">http.pubsub</a></li>
				<li><a href="/v1/docs/http.ratelimit">http.ratelimit</a></li>
				<li><a href="/v1/docs/http.realip">http.realip</a></li>
				<li><a href="/v1/docs/http.reauth">http.reauth</a></li>
				<li><a href="/v1/docs/http.recaptcha">http.recaptcha</a></li>
				<li><a href="/v1/docs/http.restic">http.restic</a></li>
				<li><a href="/v1/docs/http.s3browser">http.s3browser</a></li>
				<li><a href="/v1/docs/http.supervisor">http.supervisor</a></li>
				<li><a href="/v1/docs/http.torproxy">http.torproxy</a></li>
				<li><a href="/v1/docs/http.webdav">http.webdav</a></li>
				<li><a href="/v1/docs/http.webp">http.webp</a></li>
		</ul>
	
		<h4>Event Hooks</h4>
		<ul>
				<li><a href="/v1/docs/hook.service">hook.service</a></li>
		</ul>
	
		<h4>Server Types</h4>
		<ul>
				<li><a href="/v1/docs/dns">dns</a></li>
				<li><a href="/v1/docs/net">net</a></li>
				<li><a href="/v1/docs/supervisor">supervisor</a></li>
		</ul>
	
		<h4>TLS Clustering</h4>
		<ul>
				<li><a href="/v1/docs/consul">consul</a></li>
				<li><a href="/v1/docs/redis">redis</a></li>
		</ul>
	
	</ul>
</nav>

			<article>
				<h2>Template Actions</h2>

				<p>Caddy's template features make it possible to add some dynamic content to your static website and include pages to help reduce duplication. Templates are supported by a few different directives such as <a href="/v1/docs/templates">templates</a>, <a href="/v1/docs/browse">browse</a>, and <a href="/v1/docs/markdown">markdown</a>.</p>

				<mark class="block">Template actions only work on directives that support them. Check the documentation for your directive to see if and how they can be used.</mark>

				<p>Caddy templates use the syntax defined in Go's <a href="http://golang.org/pkg/text/template/">text/template</a> package. Understanding text/template will help you take full advantage of templates, but for those of us who aren't programmers, here are some simplified instructions. Caddy also adds some extra helpful functions for templating web pages specifically, which we've documented here.</p>

				<h3 id="basic-syntax">Basic Syntax</h3>

				<p>Template actions are enclosed between <code>&#123;&#123;</code> and <code>&#125;&#125;</code> markers. Template words are case-sensitive.</p>

				<h3 id="common-functions">Common Functions</h3>

				<h5>Include another file:</h5>

				<code class="block">&#123;&#123;.Include "path/to/file.html"&#125;&#125;  // no arguments
&#123;&#123;.Include "path/to/file.html" "arg1" 2 "value 3"&#125;&#125;  // with arguments</code>

				<h5>Get argument within included file:</h5>

				<code class="block">&#123;&#123;index .Args 0&#125;&#125; // 0 is first argument, and so on</code>

				<h5>Include and render a Markdown file: (not needed in <a href="/v1/docs/markdown">markdown</a> middleware)</h5>

				<code class="block">&#123;&#123;.Markdown "path/to/file.md"&#125;&#125;</code>

				<h5>Show current timestamp: (<a href="https://golang.org/pkg/time/#pkg-constants">format</a>)</h5>

				<code class="block">&#123;&#123;.Now "Monday, 2 Jan 2006"&#125;&#125;</code>

				<h5>Cookie value:</h5>

				<code class="block">&#123;&#123;.Cookie "name"&#125;&#125;</code>

				<h5>Header field value:</h5>

				<code class="block">&#123;&#123;.Header "name"&#125;&#125;</code>

				<h5>Visitor's IP:</h5>

				<code class="block">&#123;&#123;.IP&#125;&#125;</code>

				<h5>Server's IP:</h5>

				<code class="block">&#123;&#123;.ServerIP&#125;&#125;</code>

				<h5>Visitor's hostname (requires DNS lookup, probably slow):</h5>

				<code class="block">&#123;&#123;.Hostname&#125;&#125;</code>

				<h5>Request URI:</h5>

				<code class="block">&#123;&#123;.URI&#125;&#125;</code>

				<h5>Host portion of request:</h5>

				<code class="block">&#123;&#123;.Host&#125;&#125;</code>

				<h5>Port portion of request:</h5>

				<code class="block">&#123;&#123;.Port&#125;&#125;</code>

				<h5>Request method:</h5>

				<code class="block">&#123;&#123;.Method&#125;&#125;</code>

				<h5>Whether request path matches another path:</h5>

				<code class="block">&#123;&#123;.PathMatches "/v1/some/path"&#125;&#125;</code>

				<h5>A part of the URL:</h5>

				<code class="block">&#123;&#123;.URL.RawQuery&#125;&#125;</code>

				<h5>TLS version:</h5>

				<code class="block">&#123;&#123;.TLSVersion&#125;&#125;</code>

				<h5>Environment variables:</h5>

				<code class="block">&#123;&#123;.Env.ENV_VAR_NAME&#125;&#125;</code>

				<h5>Truncate value to certain length: (from beginning, or from end)</h5>

				<code class="block">&#123;&#123;.Truncate "value" 3&#125;&#125;  // "val"</code>

				<code class="block">&#123;&#123;.Truncate "value" -3&#125;&#125; // "lue"</code>

				<h5>String replacement:</h5>

				<code class="block">&#123;&#123;.Replace "haystack" "needle" "replacement"&#125;&#125;</code>

				<h5>Current date/time object: (useful in date-related functions)</h5>

				<code class="block">&#123;&#123;.NowDate&#125;&#125;</code>

				<h5>Get extension from file path:</h5>

				<code class="block">&#123;&#123;.Ext "path/filename.ext"&#125;&#125;</code>

				<h5>Strip extension from file path:</h5>

				<code class="block">&#123;&#123;.StripExt "filename.ext"&#125;&#125;</code>

				<h5>Strip HTML, leaving only the plain text:</h5>

				<code class="block">&#123;&#123;.StripHTML "Shows &lt;b&gt;only&lt;/b&gt; text content"&#125;&#125;</code>

				<h5>Lower-case a string:</h5>

				<code class="block">&#123;&#123;.ToLower "Makes Me ONLY lowercase"&#125;&#125;</code>

				<h5>Upper-case a string:</h5>

				<code class="block">&#123;&#123;.ToUpper "Makes me only UPPERCASE"&#125;&#125;</code>

				<h5>Split a string by separator:</h5>

				<code class="block">&#123;&#123;.Split "123-456-7890" "-"&#125;&#125;</code>

				<h5>Convert list of values to a slice (array):</h5>

				<code class="block">&#123;&#123;.Slice "a" "b" "c"&#125;&#125;</code>

				<h5>Map keys to values: (useful in advanced cases, with subtemplates, etc.)</h5>

				<code class="block">&#123;&#123;.Map "key1" "value1" "key2" "value2"&#125;&#125;</code>

				<h5>List files in a directory:</h5>

				<code class="block">&#123;&#123;.Files "sub/directory"&#125;&#125;
&#123;&#123;.Context.Files "sub/directory"&#125;&#125; // prefix with .Context in markdown templates</code>

				<h5>Whether <a href="/v1/docs/mitm-detection">HTTPS interception</a> is likely:</h5>

				<code class="block">&#123;&#123;.IsMITM&#125;&#125;</code>

				<h5>Random string of random length between min and max length:</h5>

				<code class="block">&#123;&#123;.RandomString 100 10000&#125;&#125;</code>

				<h3 id="sanitization">Built-in Sanitization Functions</h3>

				<p>These functions are built into text/template but you may find them helpful.</p>

				<h5>Make HTML-safe (escape special characters):</h5>

				<code class="block">&#123;&#123;html "Makes it &lt;i&gt;safe&lt;/i&gt; to render as HTML"&#125;&#125;</code>

				<h5>Make JavaScript-safe:</h5>

				<code class="block">&#123;&#123;js "Makes content safe for use in JS"&#125;&#125;</code>

				<h5>URL-escape (query-encode):</h5>

				<code class="block">&#123;&#123;urlquery "Makes safe for URL query strings"&#125;&#125;</code>

				<h3 id="control-statements">Control Statements</h3>

				<h5>If:</h5>

				<code class="block">&#123;&#123;if .PathMatches "/v1/secret/sauce"&#125;&#125;
	Only for secret sauce pages
&#123;&#123;end&#125;&#125;</code>

				<h5>If-else:</h5>

				<code class="block">&#123;&#123;if .PathMatches "/v1/secret/sauce"&#125;&#125;
	Only for secret sauce pages
&#123;&#123;else&#125;&#125;
	No secret sauce for you
&#123;&#123;end&#125;&#125;</code>

				<h5>If-elseif-else:</h5>

				<code class="block">&#123;&#123;if .PathMatches "/v1/secret/sauce"&#125;&#125;
	Only for secret sauce pages
&#123;&#123;else if eq .URL "/v1/banana.html"&#125;&#125;
	You're on the banana page
&#123;&#123;else&#125;&#125;
	No bananas or secret sauce
&#123;&#123;end&#125;&#125;</code>

				<h5>Range: (iterate data; this example dumps request headers)</h5>

				<code class="block">&#123;&#123;range $field, $val := .Req.Header&#125;&#125;
    &#123;&#123;$field&#125;&#125;: &#123;&#123;$val&#125;&#125;
&#123;&#123;end&#125;&#125;</code>

				<h5>Server-side comments:</h5>

				<code class="block">&#123;&#123;/* This isn't sent to the client */&#125;&#125;</code>

				<h3 id="comparison-functions">Comparison Functions</h3>

				<p>Useful in "if" statements, you can use comparison functions:</p>

				<ul>
				<li><code>eq</code> Equal</li>
				<li><code>ne</code> Not equal</li>
				<li><code>lt</code> Less than</li>
				<li><code>le</code> Less than or equal</li>
				<li><code>gt</code> Greater than</li>
				<li><code>ge</code> Greater than or equal</li>
				</ul>

				<p>Or these logic functions:</p>

				<ul>
				<li><code>not</code> Reverses the if condition</li>
				<li><code>or</code> Returns first non-empty argument or the last argument</li>
				<li><code>and</code> Returns first empty argument or the last argument</li>
				</ul>

				<h3 id="further-reading">Further Reading</h3>

				<p>These are just a few examples of what you can do. If you need even more template power, read the description of the <a href="http://golang.org/pkg/text/template/">text/template</a> package which goes into much more detail.</p>



			</article>
		</div>

		<footer>
	<div class="nav-container">
		<div class="flex content">
			<div class="col">
				<img src="/v1/resources/images/caddy-white.png" class="logo" alt="Caddy Web Server">
				<br>
				A project by <a href="https://twitter.com/mholt6">Matthew Holt</a>
				<br>
				as part of <a href="https://www.lightcodelabs.com">Light Code Labs</a>
				<br>
				in partnership with <a href="https://www.ardanlabs.com">Ardan Labs</a>
			</div>
			<nav>
				<h6>The Project</h6>
				<a href="/v1/download">Download</a>
				<a href="https://github.com/caddyserver/caddy">GitHub</a>
				<a href="/v1/docs">Docs</a>
				<a href="/v1/brand">Brand Kit</a>
			</nav>
			<nav>
				<h6>Account</h6>
				<a href="/v1/account/login">Log In</a>
				<a href="/v1/account/register">Sign Up</a>
				<a href="/v1/legal/terms-of-service">Terms of Service</a>
			</nav>
			<nav>
				<h6>Community</h6>
				<a href="https://caddy.community/">Forum</a>
				<a href="https://github.com/caddyserver/caddy">GitHub</a>
				<a href="https://twitter.com/caddyserver">Twitter</a>
				<a href="/v1/blog/">Blog</a>
			</nav>
			<div class="col">
				<h6>Hey, You.</h6>
                Be notified of new releases!
                <form id="footer-signup-form">
                    <input id="footer-email" name="email" type="email" placeholder="> email address" required value="">
                    <button class="subscribe" type="submit">Subscribe</button>
                </form>
			</div>
		</div>
		<div class="copyright">
			&copy; 2015-2020 Light Code Labs. All rights reserved.<br>Caddy&reg; is a registered trademark of Light Code Labs, LLC.
		</div>
	</div>
</footer>

	</body>
</head>