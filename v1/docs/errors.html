<!DOCTYPE html>
<head>
	<head>
		<title>http.errors - Caddy User Guide</title>
		<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Archivo+Black|Source+Sans+Pro:200,300,400,400i,600,700,700i,900">
<link rel="icon" href="/v1/resources/images/favicon.png">
<link rel="stylesheet" href="/v1/resources/css/common.css">
<link rel="stylesheet" href="/v1/resources/css/sweetalert2.min.css">
<script src="/v1/resources/js/sweetalert2.min.js"></script>
<script src="/v1/resources/js/jquery-3.3.1.min.js"></script>
<script src="/v1/resources/js/common.js"></script>
		<link rel="stylesheet" href="/v1/resources/css/docs.css">
	</head>
	<body>
		<header>
	<div class="top-bar content">
	<div class="left-links">
		<a href="/"><img src="/v1/resources/images/caddy-white.png" id="logo" alt="Caddy"></a>
	</div>
	<nav class="right-links links">
		<a href="/v1/download">Download</a>
		<a href="/v1/docs">Docs</a>
		<a href="/v1/stats">Stats</a>
		<a href="https://caddy.community">Forum</a>
		<a href="https://github.com/caddyserver/caddy" id="top-github-link">GitHub</a>
		<a href="/v1/account/login">Log In</a>
	</nav>
</div>
<a href="/" id="v2-banner">
	This page is about Caddy 1 and will go away soon because Caddy 2 is now available. Click here for Caddy 2.
</a>
	<div class="content">
		<h1>User Guide</h1>
	</div>
</header>

<nav class="main">
	<div class="content">
		<a href="/v1/docs" class="current">Documentation</a>
		<a href="/v1/tutorial">Tutorials</a>
		<a href="https://github.com/caddyserver/examples" class="external-link">Examples</a>
	</div>
</nav>


		<div class="content-container">
			<nav class="side">
	<!-- TODO: Consider using Maven Pro or Muli as font... -->
	<h3>Using Caddy</h3>
	<ul>
		<li><a href="/v1/tutorial">Getting Started &rarr;</a></li>
		<li><a href="/v1/docs/cli">Command Line Interface</a></li>
		<li><a href="/v1/docs/caddyfile">Caddyfile Syntax</a></li>
		<li><a href="/v1/docs/telemetry">Telemetry</a></li>
	</ul>

	<h3>HTTP Server</h3>
	<ul>
		<li><a href="/v1/docs/http-caddyfile">HTTP Caddyfile</a></li>
		<li><a href="/v1/docs/automatic-https">Automatic HTTPS</a></li>
		<li><a href="/v1/docs/mitm-detection">MITM Detection</a></li>
		<li><a href="/v1/docs/placeholders">Placeholders</a></li>
		<li><a href="/v1/docs/template-actions">Template Actions</a></li>
	</ul>

	<h4>Standard HTTP Directives</h4>
	<ul>
		<li><a href="/v1/docs/basicauth">basicauth</a></li>
		<li><a href="/v1/docs/bind">bind</a></li>
		<li><a href="/v1/docs/browse">browse</a></li>
		<li><a href="/v1/docs/errors">errors</a></li>
		<li><a href="/v1/docs/expvar">expvar</a></li>
		<li><a href="/v1/docs/ext">ext</a></li>
		<li><a href="/v1/docs/fastcgi">fastcgi</a></li>
		<li><a href="/v1/docs/gzip">gzip</a></li>
		<li><a href="/v1/docs/header">header</a></li>
		<li><a href="/v1/docs/import">import</a></li>
		<li><a href="/v1/docs/index">index</a></li>
		<li><a href="/v1/docs/internal">internal</a></li>
		<li><a href="/v1/docs/limits">limits</a></li>
		<li><a href="/v1/docs/log">log</a></li>
		<li><a href="/v1/docs/markdown">markdown</a></li>
		<li><a href="/v1/docs/mime">mime</a></li>
		<li><a href="/v1/docs/on">on</a></li>
		<li><a href="/v1/docs/pprof">pprof</a></li>
		<li><a href="/v1/docs/proxy">proxy</a></li>
		<li><a href="/v1/docs/push">push</a></li>
		<li><a href="/v1/docs/redir">redir</a></li>
		<li><a href="/v1/docs/request_id">request_id</a></li>
		<li><a href="/v1/docs/rewrite">rewrite</a></li>
		<li><a href="/v1/docs/root">root</a></li>
		<li><a href="/v1/docs/status">status</a></li>
		<li><a href="/v1/docs/templates">templates</a></li>
		<li><a href="/v1/docs/timeouts">timeouts</a></li>
		<li><a href="/v1/docs/tls">tls</a></li>
		<li><a href="/v1/docs/websocket">websocket</a></li>
	</ul>

	<h3>Plugins</h3>
	<ul>
		<li><a href="https://github.com/caddyserver/caddy/wiki" class="external-link">Writing a Caddy Plugin</a></li>
	</ul>

	
		<h4>Caddyfile Loaders</h4>
		<ul>
				<li><a href="/v1/docs/docker">docker</a></li>
		</ul>
	
		<h4>DNS Providers</h4>
		<ul>
				<li><a href="/v1/docs/tls.dns.auroradns">tls.dns.auroradns</a></li>
				<li><a href="/v1/docs/tls.dns.azure">tls.dns.azure</a></li>
				<li><a href="/v1/docs/tls.dns.cloudflare">tls.dns.cloudflare</a></li>
				<li><a href="/v1/docs/tls.dns.cloudxns">tls.dns.cloudxns</a></li>
				<li><a href="/v1/docs/tls.dns.digitalocean">tls.dns.digitalocean</a></li>
				<li><a href="/v1/docs/tls.dns.dnsimple">tls.dns.dnsimple</a></li>
				<li><a href="/v1/docs/tls.dns.dnsmadeeasy">tls.dns.dnsmadeeasy</a></li>
				<li><a href="/v1/docs/tls.dns.dnspod">tls.dns.dnspod</a></li>
				<li><a href="/v1/docs/tls.dns.duckdns">tls.dns.duckdns</a></li>
				<li><a href="/v1/docs/tls.dns.dyn">tls.dns.dyn</a></li>
				<li><a href="/v1/docs/tls.dns.exoscale">tls.dns.exoscale</a></li>
				<li><a href="/v1/docs/tls.dns.gandi">tls.dns.gandi</a></li>
				<li><a href="/v1/docs/tls.dns.gandiv5">tls.dns.gandiv5</a></li>
				<li><a href="/v1/docs/tls.dns.godaddy">tls.dns.godaddy</a></li>
				<li><a href="/v1/docs/tls.dns.googlecloud">tls.dns.googlecloud</a></li>
				<li><a href="/v1/docs/tls.dns.lightsail">tls.dns.lightsail</a></li>
				<li><a href="/v1/docs/tls.dns.linode">tls.dns.linode</a></li>
				<li><a href="/v1/docs/tls.dns.namecheap">tls.dns.namecheap</a></li>
				<li><a href="/v1/docs/tls.dns.namedotcom">tls.dns.namedotcom</a></li>
				<li><a href="/v1/docs/tls.dns.namesilo">tls.dns.namesilo</a></li>
				<li><a href="/v1/docs/tls.dns.ns1">tls.dns.ns1</a></li>
				<li><a href="/v1/docs/tls.dns.otc">tls.dns.otc</a></li>
				<li><a href="/v1/docs/tls.dns.ovh">tls.dns.ovh</a></li>
				<li><a href="/v1/docs/tls.dns.powerdns">tls.dns.powerdns</a></li>
				<li><a href="/v1/docs/tls.dns.rackspace">tls.dns.rackspace</a></li>
				<li><a href="/v1/docs/tls.dns.rfc2136">tls.dns.rfc2136</a></li>
				<li><a href="/v1/docs/tls.dns.route53">tls.dns.route53</a></li>
				<li><a href="/v1/docs/tls.dns.vultr">tls.dns.vultr</a></li>
		</ul>
	
		<h4>Directives/Middleware</h4>
		<ul>
				<li><a href="/v1/docs/dyndns">dyndns</a></li>
				<li><a href="/v1/docs/http.authz">http.authz</a></li>
				<li><a href="/v1/docs/http.awses">http.awses</a></li>
				<li><a href="/v1/docs/http.awslambda">http.awslambda</a></li>
				<li><a href="/v1/docs/http.cache">http.cache</a></li>
				<li><a href="/v1/docs/http.cgi">http.cgi</a></li>
				<li><a href="/v1/docs/http.cors">http.cors</a></li>
				<li><a href="/v1/docs/http.datadog">http.datadog</a></li>
				<li><a href="/v1/docs/http.expires">http.expires</a></li>
				<li><a href="/v1/docs/http.filter">http.filter</a></li>
				<li><a href="/v1/docs/http.forwardproxy">http.forwardproxy</a></li>
				<li><a href="/v1/docs/http.geoip">http.geoip</a></li>
				<li><a href="/v1/docs/http.git">http.git</a></li>
				<li><a href="/v1/docs/http.gomods">http.gomods</a></li>
				<li><a href="/v1/docs/http.gopkg">http.gopkg</a></li>
				<li><a href="/v1/docs/http.grpc">http.grpc</a></li>
				<li><a href="/v1/docs/http.ipfilter">http.ipfilter</a></li>
				<li><a href="/v1/docs/http.jwt">http.jwt</a></li>
				<li><a href="/v1/docs/http.locale">http.locale</a></li>
				<li><a href="/v1/docs/http.login">http.login</a></li>
				<li><a href="/v1/docs/http.mailout">http.mailout</a></li>
				<li><a href="/v1/docs/http.minify">http.minify</a></li>
				<li><a href="/v1/docs/http.nobots">http.nobots</a></li>
				<li><a href="/v1/docs/http.permission">http.permission</a></li>
				<li><a href="/v1/docs/http.prometheus">http.prometheus</a></li>
				<li><a href="/v1/docs/http.proxyprotocol">http.proxyprotocol</a></li>
				<li><a href="/v1/docs/http.pubsub">http.pubsub</a></li>
				<li><a href="/v1/docs/http.ratelimit">http.ratelimit</a></li>
				<li><a href="/v1/docs/http.realip">http.realip</a></li>
				<li><a href="/v1/docs/http.reauth">http.reauth</a></li>
				<li><a href="/v1/docs/http.recaptcha">http.recaptcha</a></li>
				<li><a href="/v1/docs/http.restic">http.restic</a></li>
				<li><a href="/v1/docs/http.s3browser">http.s3browser</a></li>
				<li><a href="/v1/docs/http.supervisor">http.supervisor</a></li>
				<li><a href="/v1/docs/http.torproxy">http.torproxy</a></li>
				<li><a href="/v1/docs/http.webdav">http.webdav</a></li>
				<li><a href="/v1/docs/http.webp">http.webp</a></li>
		</ul>
	
		<h4>Event Hooks</h4>
		<ul>
				<li><a href="/v1/docs/hook.service">hook.service</a></li>
		</ul>
	
		<h4>Server Types</h4>
		<ul>
				<li><a href="/v1/docs/dns">dns</a></li>
				<li><a href="/v1/docs/net">net</a></li>
				<li><a href="/v1/docs/supervisor">supervisor</a></li>
		</ul>
	
		<h4>TLS Clustering</h4>
		<ul>
				<li><a href="/v1/docs/consul">consul</a></li>
				<li><a href="/v1/docs/redis">redis</a></li>
		</ul>
	
	</ul>
</nav>

			<article>
				<h2>http.errors</h2>

				<p>errors allows you to set custom error pages and enable error logging.</p>

				<p>
					Without this middleware, error responses (HTTP status &gt;= 400) are not logged and the client receives a plaintext error message.
				</p>

				<p>
					Using an error log, the text of each error will be recorded so you can determine what is going wrong without exposing those details to the clients. With error pages, you can present custom error messages and instruct your visitor what to do. When you specify custom error pages, error logging is automatically enabled.
				</p>

				<h3 id="syntax">Syntax</h3>

				<p><code class="block"><span class="cf-dir">errors</span> <span class="cf-arg">[<i>logfile</i>]</span></code></p>

				<ul>
					<li><strong>logfile</strong> is the path to the error log file to create (or append to), relative to the current working directory. See <a href="#destination">Log Destination</a> for more details about how to specify an output location. Default is <code>stderr</code>.</li>
				</ul>

				<p>
					To specify custom error pages, open a block:
				</p>

					<code class="block"><span class="cf-dir">errors</span> <span class="cf-arg">[<i>logfile</i>]</span> {
	<span class="cf-subdir"><i>code</i></span>     <i>file</i>
	<span class="cf-subdir">rotate_size</span>     <i>mb</i>
	<span class="cf-subdir">rotate_age</span>      <i>days</i>
	<span class="cf-subdir">rotate_keep</span>     <i>count</i>
	<span class="cf-subdir">rotate_compress</span>
}</code>

				<ul>
					<li><strong>code</strong> can be an HTTP status code (4xx, 5xx, or <code>*</code> for default error page).</li>
					<li><strong>file</strong> is the static HTML file of the error page (path is relative to site root).</li>
					<li><strong>rotate_size</strong> is the size in megabytes a log file must reach before rolling it.</li>
					<li><strong>rotate_age</strong> is how long in days to keep rotated log files.</li>
					<li><strong>rotate_keep</strong> is the maximum number of rotated log files to keep; older rotated log files get pruned.</li>
					<li><strong>rotate_compress</strong> is the option to compress rotated log files. gzip is the only format supported.</li>
				</ul>

				<h3 id="destination">Log Destination</h3>

				<p>
					The log destination can be one of a few things:
				</p>
				<ul>
					<li>a filename relative to the current working directory</li>
					<li><code>stdout</code> or <code>stderr</code> to write to the console</li>
					<li><code>visible</code> to write the error (including full stack trace, if applicable) to the response (NOT recommended except for local debugging)</li>
					<li><code>syslog</code> to write to the local system log (except on Windows)</li>
					<li><code>syslog://host[:port]</code> to write via UDP to a local or remote syslog server</li>
					<li><code>syslog+udp://host[:port]</code> is the same as above</li>
					<li><code>syslog+tcp://host[:port]</code> to write via TCP to local or remote syslog server</li>
				</ul>
				<p>
					The default log destination is <code>stderr</code>.
				</p>

				<h3 id="rolling">Log Rolling</h3>

				<p>
					Logs have the potential to fill the disk. To mitigate this, error logs are rotated ("rolled") automatically according to this default configuration:
				</p>

				<code class="block"><span class="cf-subdir">rotate_size</span> 100 <span class="cf-comment"># Rotate a log when it reaches 100 MB</span>
<span class="cf-subdir">rotate_age</span>  14  <span class="cf-comment"># Keep rotated log files for 14 days</span>
<span class="cf-subdir">rotate_keep</span> 10  <span class="cf-comment"># Keep at most 10 rotated log files</span>
<span class="cf-subdir">rotate_compress</span> <span class="cf-comment"># Compress rotated log files in gzip format</span></code>

				<p>
					You can specify these subdirectives to customize log rolling.
				</p>

				<h3 id="examples">Examples</h3>

				<p>Log errors to stderr:</p>

				<p><code class="block"><span class="cf-dir">errors</span></code></p>

				<p>Log errors to a custom file in the parent directory:</p>

				<p><code class="block"><span class="cf-dir">errors</span> <span class="cf-arg">../error.log</span></code></p>

				<p>Log errors and serve custom error pages:</p>

				<p><code class="block"><span class="cf-dir">errors</span> {
	<span class="cf-subdir">404</span> 404.html <span class="cf-comment"># Not Found</span>
	<span class="cf-subdir">500</span> 500.html <span class="cf-comment"># Internal Server Error</span>
}</code></p>

				<p>Log errors to custom log file and serve custom error pages:</p>

				<p><code class="block"><span class="cf-dir">errors</span> ../error.log {
	<span class="cf-subdir">404</span> 404.html <span class="cf-comment"># Not Found</span>
	<span class="cf-subdir">500</span> 500.html <span class="cf-comment"># Internal Server Error</span>
}</code></p>

				<p>Define a default, catch-all error page:</p>

				<p><code class="block"><span class="cf-dir">errors</span> {
	<span class="cf-subdir">*</span> default_error.html
}</code></p>

				<p>Make errors visible to the client (for debugging only):</p>

				<p><code class="block"><span class="cf-dir">errors</span> <span class="cf-arg">visible</span></code></p>

				<p>Customize error log rolling:</p>

				<p><code class="block"><span class="cf-dir">errors</span> {
	<span class="cf-subdir">rotate_size</span> 50  <span class="cf-comment"># Rotate after 50 MB</span>
	<span class="cf-subdir">rotate_age</span>  90  <span class="cf-comment"># Keep rotated files for 90 days</span>
	<span class="cf-subdir">rotate_keep</span> 20  <span class="cf-comment"># Keep at most 20 log files</span>
	<span class="cf-subdir">rotate_compress</span> <span class="cf-comment"># Compress rotated log files in gzip format</span>
}</code></p>



				<div class="help-box">
	<h3>Need help with this feature?</h3>
	<p>
		Join us in the <a href="https://caddy.community">Caddy forum</a>, where the open source community gathers to share their knowledge.
	</p>

	<h3>Does your company use Caddy?</h3>
	<p>
		<a href="/v1/products/licenses">Purchase a commercial license</a> to use Caddy with your business and for basic email support, along with other benefits!
	</p>
</div>
			</article>
		</div>
		<footer>
	<div class="nav-container">
		<div class="flex content">
			<div class="col">
				<img src="/v1/resources/images/caddy-white.png" class="logo" alt="Caddy Web Server">
				<br>
				A project by <a href="https://twitter.com/mholt6">Matthew Holt</a>
				<br>
				as part of <a href="https://www.lightcodelabs.com">Light Code Labs</a>
				<br>
				in partnership with <a href="https://www.ardanlabs.com">Ardan Labs</a>
			</div>
			<nav>
				<h6>The Project</h6>
				<a href="/v1/download">Download</a>
				<a href="https://github.com/caddyserver/caddy">GitHub</a>
				<a href="/v1/docs">Docs</a>
				<a href="/v1/brand">Brand Kit</a>
			</nav>
			<nav>
				<h6>Account</h6>
				<a href="/v1/account/login">Log In</a>
				<a href="/v1/account/register">Sign Up</a>
				<a href="/v1/legal/terms-of-service">Terms of Service</a>
			</nav>
			<nav>
				<h6>Community</h6>
				<a href="https://caddy.community/">Forum</a>
				<a href="https://github.com/caddyserver/caddy">GitHub</a>
				<a href="https://twitter.com/caddyserver">Twitter</a>
				<a href="/v1/blog/">Blog</a>
			</nav>
			<div class="col">
				<h6>Hey, You.</h6>
                Be notified of new releases!
                <form id="footer-signup-form">
                    <input id="footer-email" name="email" type="email" placeholder="> email address" required value="">
                    <button class="subscribe" type="submit">Subscribe</button>
                </form>
			</div>
		</div>
		<div class="copyright">
			&copy; 2015-2020 Light Code Labs. All rights reserved.<br>Caddy&reg; is a registered trademark of Light Code Labs, LLC.
		</div>
	</div>
</footer>

	</body>
</head>
